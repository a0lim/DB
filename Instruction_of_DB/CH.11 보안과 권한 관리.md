## 1. 보안
* DB의 보안을 유지하는 방법
  - 물리적 환경에 대한 보안  
    : 자연 재해 등으로부터 보호
  - 권한 관리를 통한 보안  
    : 권한이 없는 사용자로부터 보호
  - 운영 관리를 통한 보안  
    : 권한이 있는 사용자로부터 보호
    
## 2. 권한 관리
### 2.1 권한 관리의 개념
* 접근 제어(access control) 기능  
  : 계정이 발급된 사용자가 로그인에 성공했을 경우에만 DB에 접근이 가능하도록 함
  
* DBMS
  - 데이터베이스 관리자  
    : 새 사용자의 계정/암호 생성, 기존 생성자의 계정르 변경/제거하는 사용자 계정을 관리
    + DB 전체의 보안을 관리하기 위해 필요한 모든 권한을 가짐
  - 사용자별로 DB의 사용 범위와 수행 가능한 작업을 제한  
    ![image](https://user-images.githubusercontent.com/104348646/202971308-9b8201cf-db8f-4956-937c-f157c21ff216.png)  
    
* DB 객체이 소유자는 필요에 따라 다른 사용자에게 자신이 소유한 객체에 대한 사용 권한을 부여할 수 있음
  - DB는 여러 사용자가 공유해서 사용할 목적으로 만들어짐
    + cf) DB에 존재하는 객체(테이블, 뷰 등)은 기본적으로 해당 객체를 생성한 사용자만 사용 권한을 가짐
  - SQL문을 이용해 사용 권한을 부여/취소
    
### 2.2 권한의 부여
* GRANT 문  
  ```
  GRANT 권한 ON 객체 TO 사용자 [WITH GRANT OPTION];
  ```
  - 부여 가능한 주요 권한
    + INSERT, DELETE, UPDATE, SELECT, REFERENCES
  - REFERENCES: 외래키 제약조건을 정의할 수 있는 권한
    + 권한 부여 대상(테이블)의 기본키를 참조하는 외래키를 자신이 생성하는 테이블에 포함 가능
  - 기본적으로 테이블을 구성하는 모든 속성에 권한을 부여
    + UPDATE, SELECT: 일부 속성만 수정/검색하는 권한 부여 가능
      ```
      GRANT UPDATE(등급, 적립금) ON 고객 TO Park; // 고객 테이블의 등급, 적립금 속성의 데이터 수정 가능
      ```
  - PUBLIC 키워드: 모든 사용자에게 권한을 똑같이 부여
    ```
    GRANT INSERT,DELETE ON 고객 TO PUBLIC;
    ```
  - WITH GRANT OPTION: 권한을 부여받은 사용자가 다른 사용자에게도 권한 부여 가능
    ```
    GRANT SELECT ON 고객 TO Lee WITH GRANT OPTION;
    ```
  - VIEW 이용  
    : 테이블에 직접 접근하지 않고 필요한 테이블의 일부분만 사용자에게 제공함
  - 시스템 권한  
    : 데이터베이스 관리와 관련된 작업에 대한 권한
    + 테이블 생성(CREATE TABLE), 뷰 생성(CREATE VIEW) 등 데이터 정의어(DDL)과 관련된 작업에 대한 권한들
    + 데이터베이스 관리자가 부여함
    + cf) 객체에 대한 권한: 해당 객체의 소유자가 부여함
      ```
      GRANT CREATE TABLE TO Song; // Song에게 테이블을 생성할 수 있는 시스템 권한을 부여함 / 객체 지정 필요 없음
      ```
      
### 2.3 권한의 취소
* REVOKE 문
  ```
  REVOKE 권한 ON 객체 FROM 사용자 CASCADE | RESTRICT;
  ```
  - 권한 부여 예시  
    : Kim이 Hong에게 권한 부여, Hong이 Park에게 권한 부여한 상황에서 Hong의 권한을 취소하는 경우
      + CASCADE 옵션: Park의 권한도 연쇄적으로 취소하는 경우
      + RESTRICT 옵션: Park의 권한은 취소하지 않는 경우
  - 시스템 권한 취소
    ```
    REVOKE CREATE TABLE TO Song; // Song에게 부여한 테이블 생성 권한 취소 / 객체 지정 필요 없음
    ```
    
### 2.4 역할의 부여와 취소
* 역할(role)  
  : 권한들의 집합
  - 새로운 역할 생성: 데이터베이스 관리자 담당
    ```
    CREATE ROLE 롤이름;
    ```
  - 역할에 필요한 권한을 넣음: 객체의 소유자가 수행
    ```
    GRANT 권한 ON 객체 TO 롤이름;
    ```
  - 역할을 사용자에게 부여: 데이터베이스 관리자가 담당
    ```
    GRANT 롤이름 TO 사용자;
    ```
  - 역할에 변화가 생기는 경우, 해당 역할을 부여받은 모든 사용자들에게 변화가 그대로 전달됨 -> 권한 관리가 쉬움
  - 사용자에게 부여한 역할을 취소: 데이터베이스 관리자 담당
    ```
    REVOKE 롤이름 FROM 사용자;
    ```
  - 역할 제거: 데이터베이스 관리자가 담당
    ```
    DROP ROLE 롤이름;
    ```
