## 1. 데이터베이스 시스템의 정의  
* 데이터베이스 시스템(DBS=Data Base System)  
: 데이터베이스에 데이터를 저장하고, 저장된 데이터를 관리하여 조직에 필요한 정보를 생성해주는 시스템
    - 데이터베이스와 DBMS를 이용해 조직에 필요한 정보를 제공하는 전체 시스템
    - 그 외에도 사용자, 데이터 언어, 데이터베이스와 데이터베이스 관리 시스템을 설치하고 데이터 처리 연산을 담당하는 컴퓨터  
    
![3-1](https://user-images.githubusercontent.com/104348646/178722250-ebb9f181-6100-4644-9197-0e8bbc320b9c.jpg)

: 데이터베이스 시스템 안에 DB, DBMS

## 2. 데이터베이스의 구조  

### 2.1 스키마  
* 스키마(Schema): 데이터의 구조와 제약조건을 정의한 것  

![3-2](https://user-images.githubusercontent.com/104348646/178722257-afd78da2-8f22-4ae5-a73b-52eb779fc4c2.jpg)

고객번호 int 등 -> 스키마

* 인스턴스(instance): 정의된 스키마에 따라 데이터베이스에 실제로 저장된 값
    - 가변성이 있음 (<-> 스키마: 한 번 정의되면 자주 변경되지 않음)

### 2.2 3단계 데이터베이스 구조
* 3단계 데이터베이스 구조(3-level database architecture)  
: 미국의 표준화 기관인 ANSI/SPARC에서 제안한 일반 사용자가 데이터베이스를 쉽게 이해하고 이용할 수 있는 구조

#### 2.2.1 3단계 데이터베이스 구조의 개념
1) 외부 단계(external level): 개별 사용자 관점
2) 개념 단계(conceptual level): 조직 전체의 관점
3) 내부 단계(internal level): 물리적인 저장 장치의 관점

![3-4](https://user-images.githubusercontent.com/104348646/178722264-18d42a4f-ce3f-4e15-8fb4-e05b147d4541.jpg)

    - 각 단계별로 다른 추상화(abstraction)을 제공하여 데이터베이스를 효과적으로 관리
    - 일반적으로 내부 단계에서 외부 단계로 갈수록 추상화 레벨이 높아짐

#### 2.2.2 외부 단계(external level)
* 외부 스키마(external): 외부 단계에서 사용자에게 필요한 데이터베이스를 정의한 것
    - (=서브 스키마=sub schema): 전체 데이터베이스 중 사용자가 관심을 가지는 일부분임
    - 개별 사용자의 관점을 표현하므로 각 사용자가 생각하는 데이터베이스의 모습인 논리적인 구조가 사용자마다 다름
    - 데이터베이스 하나에 외부 스키마가 여러 개 존재 가능, 하나의 외부 스키마를 공유 가능

#### 2.2.3 개념 단계(conceptual level)
* 개념 스키마(=conceptual schema=일반적인 스키마): 데이터베이스 관리 시스템이나 관리자의 관점에서 모든 사용자에게 필요한 데이터를 통합한 전체 데이터베이스의 논리적 구조
    - 조직 전체의 관점에서 생각하는 데이터베이스의 모습 = 모든 사용자가 생각하는 데이터베이스의 모습의 집합
    - 데이터의 종류, 데이터들 간의 관계, 제약조건 뿐만 아니라 데이터에 대한 보안 정책, 접근 권한에 대한 정의를 포함
    - 데이터베이스 하나에는 하나의 개념 스키마만 존재, 각 사용자는 개념 스키마의 일부분을 사용

#### 2.2.4 내부 단계(internal level)
* 내부 스키마(internal schema): 전체 데이터베이스가 저장 장치에 실제로 저장되는 방법을 정의한 것
    - 파일에 데이터를 저장하는 레코드의 구조, 필드 크기, 인덱스를 이용한 레코드 접근 경로 등을 정의
    - 하나의 데이터베이스에 하나의 내부 스키마만 존재 <- 데이터베이스의 개념 스키마에 대한 물리적인 저장 구조

![3-5](https://user-images.githubusercontent.com/104348646/178722271-a6e1e7ce-df2f-40fd-8749-9a84a72ad57f.jpg)

#### 2.3.1 논리적 데이터 독립성 
: 개념 스키마가 변경되더라도 외부 스키마가 영향을 받지 않는 것 
        - 전체 데이터베이스의 구조가 변경되어도 관련 정보만 적절히 수정하면 외부 스키마를 변경하지 않아도 됨 -> 외부 스키마의 사용자에게는 변화 없음 

* 응용 인터페이스(application=APP) 
: 외부 스키마와 개념 스키마의 대응 관계 
        - 외부/개념 사상 

#### 2.3.2 물리적 데이터 독립성 
: 내부 스키마가 변경되더라도 개념 스키마가 영향을 받지 않는 것 

* 저장 인터페이스(storage interface) 
: 개념/내부 스키마와 내부 스키마의 대응관계 
        - 개념/내부 사상 

### 2.4 데이터 사전 
* 데이터 사전(data dictionary) (=시스템 카탈로그=system catalog) (=시스템 데이터베이스=system database) 
: 데이터베이스에 저장되어 있는 데이터에 관한 정보를 저장하는 곳 
        - 데이터베이스에 저장된 데이터를 정확하게 이용하기 위해 참고해야 되는 스키마, 사상정보, 다양한 제약조건 등을 저장 
        - 사용자가 접근할 수 있음 
        - cf) 사용자 데이터베이스(user database) 
        : 사용자가 실제로 이용하는 데이터가 저장되는 일반 데이터베이스 

* 메타 데이터(meta data = data about data) 
: 데이터베이스에 저장된 데이터에 관한 정보 

* 데이터 디렉토리(data directory) 
: 데이터 사전에 있는 데이터에 실제로 접근하는 데 필요한 위치 정보를 관리하는 곳 
    - 시스템만 접근할 수 있음 

## 3. 데이터베이스 사용자 
* 사용자(user) 
: 데이터베이스를 이용하기 위해 접근하는 모든 사람 
    - 이용 목적에 따라 데이터베이스 관리자, 최종 사용자, 응용 프로그래머 

### 3.1 데이터베이스 관리자 
* 데이터베이스 관리자(DBA=data base administrator) 
    - 데이터베이스 시스템을 운영 관리 (ex. 데이터베이스를 설계/구축, 데이터베이스 제어) 
    - 주로 데이터 정의어와 데이터 제어를 이용해 데이터베이스에 접근 
    - cf) 데이터베이스 설계자(database designer): 데이터베이스 설계 업무만 담당 

* 데이터베이스 관리자의 주요 업무  
    - 데이터베이스 구성 요소 선정  
    : 사용자의 요구 사항을 분석하여 데이터베이스를 구성할 데이터를 결정  
                
    - 데이터베이스 스키마 정의  
        : 선정된 데이터베이스의 구성 요소를 토대로 데이터베이스 스키마를 설계 / 데이터 정의어를 이용해 설계한 스키마를 데이터베이스 관리 시스템에 설명  
        
    - 물리적 저장 구조와 접근 방법 결정  
        : 데이터베이스를 물리적으로 저장하기 위한 레코드 구조를 설계  
        + 레코드들 간의 저장 순서와 레코드에 빠르게 접근하기 위해 인덱스를 만들 기준 필드 등을 결정  
                
    - 무결성 유지를 위한 제약조건 정의  
        : 실제 데이터(현실 데이터)와 일치하여 결함이 없는 데이터만 데이터베이스에 저장할 수 있도록 규칙을 정의 / 데이터베이스를 규칙에 따라 제어하여 데이터의 정확성과 유효성 유지  
                
    - 보안 및 접근 권한 정책 결정  
        : 사용자가 데이터베이스에 불법적으로 접근하는 것을 방지하고 허가된 사용자에게는 적절한 권한을 부여하는 보안 관력 정책을 결정  
        
    - 백업 및 회복 기법 정의
        : 시스템 장애에 대비하여 데이터베이스를 백업하거나, 손상된 데이터베이스를 일관된 상태로 복구하는 방법을 정의  
                
    - 시스템 데이터베이스 관리  
        : 데이터 사전과 같은 시스템 데이터베이스를 관리  
                
    - 시스템 성능 감시 및 성능 분석  
        : 시스템의 성능을 저해하는 병목 현상(bottle neck) 등이 발생하지 않는지 확인 / 시스템 자원의 활용도 분석을 통해 시스템의 성능을 감시 
                
    - 데이터베이스 재구성  
        : 사용자의 요구 사항에 귀 기울이고 시스템 성능을 분석하여, 새로운 변화에 부응하면서 성능을 향상시키기 위해 데이터베이스를 재구성 
        + ex.) 사용자의 요구 사항, 시스템 전체의 성능 향상, 시스템 장비 교체 등 

### 3.2 최종 사용자 
* 최종 사용자(end user)(=일반 사용자)  
    : 데이터를 조작하기 위해 데이터베이스에 접근하는 사람들  
    - 주로 데이터 조작어 사용(데이터 정의어도 사용 가능)  

* 최종 사용자의 분류 

    - 캐주얼 사용자(casual end user)  
        : 데이터베이스에 대한 이론적 지식으로 원하는 데이터와 데이터의 처리를 데이터베이스 관리 시스템에 직접 설명하는 최종 사용자  

    - 초보 사용자(naive end user)  
        : 데이터베이스가 초보 수준이기 때문에 GUI(graphic user interface)나 메뉴 형태의 응용 프로젝트를 통해 데이터베이스를 사용하는 최종 사용자  

### 3.3 응용 프로그래머  
* 응용 프로그래머(application progammer): 프로그래밍 언어로 응용 프로그램을 작성할 때 데이터베이스에 접근하는 데이터 조작어를 삽입하는 사용자  
    - 주로 데이터 조작어 삽입(데이터 정의어도 가능)  

## 4. 데이터 언어(data language)  
: 사용자가 데이터베이스를 구축하고 접근하기 위해 DBMS과 통신하기 위한 수단  

* 데이터 언어의 종류  

    - 사용 목적에 따라 데이터 정의어, 데이터 조작어, 데이터 제어어로 나뉨  
    - 내부적 구분일 뿐, 독립적으로 존재하는 언어들이 아님  

![3-9](https://user-images.githubusercontent.com/104348646/179169359-b8259332-3737-4ad2-a56c-845517948e1b.jpg)

### 4.1 데이터 정의어(DDL=Data Definition Language)  
: 새로운 데이터베이스를 구축하기 위해 스키마를 정의하거나 기존 스키마의 정의를 삭제/수정하기 위해 사용하는 데이터 언어  
- 새 데이터베이스의 스키마를 설명, 기존 스키마의 구조나 제약조건 등의 변경/삭제를 위해 이를 DBMS에 알리는 상항에서 사용  
- 정의/삭제/수정 내용 모두 데이터 사전에 반영됨  
- ex.) CREATE, ALTER, DROP  

### 4.2 데이터 조작어(=DML=Data Manipulation language)  
: 사용자가 데이터의 삽입/삭제/수정/검색 등의 처리를 DBMS에 요구하기 위해 사용하는 데이터 언어  
- 저장된 실제 데이터 값(인스턴스)를 활용하는 경우에 사용  
- 설명 방식에 따른 구분: 절차적 데이터 조작어, 비절차적 데이터 조작어  
- ex.) INSERT, DELETE, UPDATE  

* 절차적 데이터 조작어(procedural DML)  

    - 사용자가 어떤 데이터를 원하고 이를 위해 해당 데이터를 어떻게 처리해야 하는지까지 설명  

* 비절차적 데이터 조작어(nonprocedural DML) (=선언적 언어=declarative language)  

    - 사용자가 어떤 데이터를 원하는지만 설명  
    - DBMS가 처리 방식을 결정하는 구조  

### 4.3 데이터 제어어(DCL=Data Control Language)  
: 내부적으로 필요한 규칙이나 기법을 정의하는 데 사용하는 데이터 언어  
- 무결성(integrity), 보안(security), 회복(recovery), 동시성(concurrency)을 보장  
- ex.) GRANTE, REVOKE  

## 5. 데이터베이스 관리 시스템의 구성  
- 사용자와 데이터 베이스 사이에 위치  
- 기능에 따른 구분: 질의 처리기, 저장데이터 관리자  
        
![3-11](https://user-images.githubusercontent.com/104348646/179169369-c394b4b2-6b41-45c8-ad63-bcbf888222f3.jpg)

### 5.1 질의 처리기(query processor)  
: 사용자의 데이터 처리 요구를 해석하여 처리하는 역할  

* 질의 처리기의 주요 구성 요소  
    - DDL 컴파일러(DDL compiler)  
        + 데이터 정의어로 작성된 스키마의 정의를 해석  
        + 새로운 데이터베이스를 수축. 스키마의 정의를 데이터 사전에 저장  
        + 기존 스키마의 삭제/수정 요청 처리 및 변경된 내용을 데이터 사전에 적용  

    - DML 프리 컴파일러(DML precompiler)  
        + 응용 프로그램에 삽입된 데이터 조작어를 추출하여 DML 컴파일러에 전달  
        + 조작어와 관련이 없는 코드들은 해당 언어의 컴파일로 보냄  

    - DML 컴파일러(DML compiler)  
        + 조작어로 작성된 데이터의 처리(삽입/삭제/수정/검색) 요구를 분석하여 런타임 데이터베이스 처리기를 위해 해석  

    - 런타임 데이터베이스 처리기(run-time database processor)  
        + 저장 데이터 관리자를 통해 DB에 접근  
        + DML 컴파일러로부터 전달받은 데이터 처리 요구를 실제로 실행  

    - 트랜잭션 관리자(transaction manager)  
        + DB 접근 과정에서 사용자의 접근 권한 검사, 무결성 유지를 위한 계약조건 위반 여부 확인  
        + 회복/ 병행 수행 관련 작업도 담당  

### 5.2 저장 데이터 관리자(stored data manager)  
: 디스크에 지정된 사용자 데이터베이스와 데이터 사전을 관리, 실제로 접근하는 역할을 담당  
- 운영체제(디스크에 저장된 데이터에 접근하는 기능)의 도움을 받아 데이터베이스에 대한 접근을 수행  
